-- 学生管理系统初始化数据脚本
-- 为每个表添加10条测试数据

-- 1. 添加更多学生数据 (已有3条，添加7条)
INSERT INTO student (id, NAME, gender, birth_date, enrollment_year, class_name, major, college, contact_info, STATUS) VALUES 
('S004', '陈明', '男', '2003-01-12', 2021, '计科2班', '计算机科学与技术', '计算机学院', '15678901234', '在读'),
('S005', '刘丽', '女', '2002-07-08', 2020, '软件工程2班', '软件工程', '计算机学院', '16789012345', '在读'),
('S006', '赵强', '男', '2001-12-30', 2019, '网络工程2班', '网络工程', '计算机学院', '17890123456', '在读'),
('S007', '孙美', '女', '2003-03-25', 2021, '计科3班', '计算机科学与技术', '计算机学院', '18901234567', '在读'),
('S008', '周华', '男', '2002-09-18', 2020, '软件工程3班', '软件工程', '计算机学院', '19012345678', '在读'),
('S009', '吴静', '女', '2001-06-14', 2019, '网络工程3班', '网络工程', '计算机学院', '13123456789', '在读'),
('S010', '郑伟', '男', '2003-04-22', 2021, '计科4班', '计算机科学与技术', '计算机学院', '13234567890', '在读');

-- 2. 添加更多教师数据 (已有3条，添加7条)
INSERT INTO teacher (id, NAME, gender, birth_date, title, college, major, contact_info, STATUS) VALUES 
('T004', '张副教授', '女', '1978-02-28', '副教授', '计算机学院', '软件工程', '13345678901', '在职'),
('T005', '刘教授', '男', '1970-11-15', '教授', '计算机学院', '网络安全', '13456789012', '在职'),
('T006', '陈讲师', '女', '1988-06-08', '讲师', '计算机学院', '数据挖掘', '13567890123', '在职'),
('T007', '李副教授', '男', '1982-01-20', '副教授', '计算机学院', '机器学习', '13678901234', '在职'),
('T008', '王讲师', '女', '1990-08-12', '讲师', '计算机学院', '云计算', '13789012345', '在职'),
('T009', '赵教授', '男', '1968-12-05', '教授', '计算机学院', '分布式系统', '13890123456', '在职'),
('T010', '孙讲师', '女', '1987-05-30', '讲师', '计算机学院', '移动开发', '13901234567', '在职');

-- 3. 添加更多课程数据 (已有3条，添加7条)
INSERT INTO course (id, NAME, credits, TYPE, semester, hours, description) VALUES 
('C004', '计算机网络', '3.0', '必修', '2024春', 48, '计算机网络基础知识和协议'),
('C005', '软件工程', '3.5', '必修', '2024春', 56, '软件开发生命周期和项目管理'),
('C006', '人工智能导论', '2.5', '选修', '2024秋', 40, '人工智能基本概念和应用'),
('C007', '数据挖掘', '3.0', '选修', '2024秋', 48, '数据挖掘算法和应用实践'),
('C008', '网络安全', '2.5', '选修', '2024春', 40, '网络安全防护和攻击防范'),
('C009', '移动应用开发', '3.0', '选修', '2024秋', 48, 'Android和iOS应用开发'),
('C010', '云计算技术', '2.5', '选修', '2024春', 40, '云计算平台和服务架构');

-- 4. 添加更多管理员数据 (已有1条，添加9条)
INSERT INTO admin (username, PASSWORD, NAME, email, phone) VALUES 
('admin001', 'pass123', '李管理员', 'admin001@example.com', '13012345678'),
('admin002', 'pass123', '王管理员', 'admin002@example.com', '13112345678'),
('admin003', 'pass123', '张管理员', 'admin003@example.com', '13212345678'),
('admin004', 'pass123', '刘管理员', 'admin004@example.com', '13312345678'),
('admin005', 'pass123', '陈管理员', 'admin005@example.com', '13412345678'),
('admin006', 'pass123', '赵管理员', 'admin006@example.com', '13512345678'),
('admin007', 'pass123', '孙管理员', 'admin007@example.com', '13612345678'),
('admin008', 'pass123', '周管理员', 'admin008@example.com', '13712345678'),
('admin009', 'pass123', '吴管理员', 'admin009@example.com', '13812345678');

-- 5. 添加更多教学任务数据 (已有3条，添加7条)
INSERT INTO teaching_task (id, course_id, teacher_id, academic_year, semester, class_name, class_time, location, STATUS) VALUES 
('TT004', 'C004', 'T004', '2023-2024', '春', '计科1班', '周四1-2节', 'D101', '进行中'),
('TT005', 'C005', 'T005', '2023-2024', '春', '软件工程1班', '周五3-4节', 'E201', '进行中'),
('TT006', 'C006', 'T006', '2023-2024', '秋', '计科2班', '周一5-6节', 'F301', '未开始'),
('TT007', 'C007', 'T007', '2023-2024', '秋', '软件工程2班', '周二1-2节', 'G401', '未开始'),
('TT008', 'C008', 'T008', '2023-2024', '春', '网络工程1班', '周三3-4节', 'H501', '进行中'),
('TT009', 'C009', 'T009', '2023-2024', '秋', '计科3班', '周四5-6节', 'I601', '未开始'),
('TT010', 'C010', 'T010', '2023-2024', '春', '软件工程3班', '周五1-2节', 'J701', '进行中');

-- 6. 添加更多成绩数据 (已有3条，添加7条)
INSERT INTO grade (student_id, teaching_task_id, regular_score, midterm_score, final_score, total_score, entry_time, entry_by, STATUS) VALUES 
('S004', 'TT004', '92.00', '89.00', '94.00', '92.00', NOW(), 'T004', '已归档'),
('S005', 'TT005', '76.50', '80.00', '78.00', '78.00', NOW(), 'T005', '公示中'),
('S006', 'TT006', '88.00', '85.50', '90.00', '88.50', NOW(), 'T006', '公示中'),
('S007', 'TT007', '95.00', '92.00', '96.00', '94.50', NOW(), 'T007', '已归档'),
('S008', 'TT008', '82.50', '78.00', '85.00', '82.00', NOW(), 'T008', '公示中'),
('S009', 'TT009', '87.00', '90.00', '88.00', '88.50', NOW(), 'T009', '已归档'),
('S010', 'TT010', '91.50', '94.00', '89.00', '91.00', NOW(), 'T010', '公示中');

-- 7. 添加更多选课记录数据 (已有3条，添加7条)
INSERT INTO enrollment (student_id, course_id, enrollment_date, STATUS) VALUES 
('S004', 'C004', NOW(), '已选'),
('S005', 'C005', NOW(), '已选'),
('S006', 'C006', NOW(), '已选'),
('S007', 'C007', NOW(), '已选'),
('S008', 'C008', NOW(), '已选'),
('S009', 'C009', NOW(), '已选'),
('S010', 'C010', NOW(), '已选');

-- 8. 添加成绩统计数据 (原表为空，添加10条)
INSERT INTO grade_statistics (object_id, TYPE, academic_year, semester, average_score, highest_score, lowest_score, pass_count, pass_rate, excellent_count, excellent_rate, statistics_time) VALUES 
('C001', '课程', '2023-2024', '春', '88.50', '94.00', '76.50', '8', '80.00', '3', '30.00', NOW()),
('C002', '课程', '2023-2024', '秋', '85.20', '96.00', '72.00', '9', '90.00', '4', '40.00', NOW()),
('C003', '课程', '2023-2024', '秋', '91.30', '98.00', '78.00', '10', '100.00', '6', '60.00', NOW()),
('计科1班', '班级', '2023-2024', '春', '86.80', '95.00', '75.00', '12', '85.71', '5', '35.71', NOW()),
('软件工程1班', '班级', '2023-2024', '春', '89.20', '96.50', '78.50', '14', '93.33', '7', '46.67', NOW()),
('网络工程1班', '班级', '2023-2024', '秋', '87.60', '94.00', '76.00', '13', '86.67', '4', '26.67', NOW()),
('T001', '教师', '2023-2024', '春', '88.00', '94.00', '82.00', '15', '93.75', '6', '37.50', NOW()),
('T002', '教师', '2023-2024', '秋', '90.50', '97.00', '80.00', '16', '100.00', '8', '50.00', NOW()),
('T003', '教师', '2023-2024', '秋', '85.75', '92.00', '76.00', '12', '80.00', '3', '20.00', NOW()),
('计算机学院', '学院', '2023-2024', '全年', '88.90', '98.00', '72.00', '45', '88.24', '18', '35.29', NOW());

-- 9. 添加交叉数据 - 一个教师教授多门课程的教学任务
INSERT INTO teaching_task (id, course_id, teacher_id, academic_year, semester, class_name, class_time, location, STATUS) VALUES 
-- T001李老师额外教授的课程
('TT011', 'C002', 'T001', '2023-2024', '秋', '计科2班', '周二5-6节', 'A102', '进行中'),
('TT012', 'C004', 'T001', '2023-2024', '春', '计科3班', '周四3-4节', 'A103', '进行中'),
-- T002王教授额外教授的课程
('TT013', 'C003', 'T002', '2023-2024', '秋', '软件工程2班', '周一3-4节', 'B202', '进行中'),
('TT014', 'C006', 'T002', '2023-2024', '秋', '计科4班', '周三1-2节', 'B203', '未开始'),
-- T003赵老师额外教授的课程
('TT015', 'C005', 'T003', '2023-2024', '春', '网络工程2班', '周五5-6节', 'C302', '进行中'),
('TT016', 'C007', 'T003', '2023-2024', '秋', '软件工程3班', '周二3-4节', 'C303', '未开始'),
-- T004张副教授额外教授的课程
('TT017', 'C008', 'T004', '2023-2024', '春', '网络工程3班', '周一1-2节', 'D102', '进行中'),
('TT018', 'C009', 'T004', '2023-2024', '秋', '计科1班', '周三5-6节', 'D103', '未开始'),
-- T005刘教授额外教授的课程
('TT019', 'C010', 'T005', '2023-2024', '春', '软件工程1班', '周四1-2节', 'E202', '进行中'),
('TT020', 'C001', 'T005', '2023-2024', '春', '网络工程1班', '周五1-2节', 'E203', '进行中');

-- 10. 添加交叉数据 - 学生选修多门课程的选课记录
INSERT INTO enrollment (student_id, course_id, enrollment_date, STATUS) VALUES 
-- S001张三选修的其他课程
('S001', 'C002', NOW(), '已选'),
('S001', 'C004', NOW(), '已选'),
('S001', 'C006', NOW(), '已选'),
-- S002李四选修的其他课程
('S002', 'C001', NOW(), '已选'),
('S002', 'C003', NOW(), '已选'),
('S002', 'C005', NOW(), '已选'),
-- S003王五选修的其他课程
('S003', 'C001', NOW(), '已选'),
('S003', 'C002', NOW(), '已选'),
('S003', 'C004', NOW(), '已选'),
-- S004陈明选修的其他课程
('S004', 'C001', NOW(), '已选'),
('S004', 'C005', NOW(), '已选'),
('S004', 'C007', NOW(), '已选'),
-- S005刘丽选修的其他课程
('S005', 'C002', NOW(), '已选'),
('S005', 'C006', NOW(), '已选'),
('S005', 'C008', NOW(), '已选'),
-- S006赵强选修的其他课程
('S006', 'C003', NOW(), '已选'),
('S006', 'C007', NOW(), '已选'),
('S006', 'C009', NOW(), '已选'),
-- S007孙美选修的其他课程
('S007', 'C004', NOW(), '已选'),
('S007', 'C008', NOW(), '已选'),
('S007', 'C010', NOW(), '已选'),
-- S008周华选修的其他课程
('S008', 'C001', NOW(), '已选'),
('S008', 'C009', NOW(), '已选'),
('S008', 'C005', NOW(), '已选'),
-- S009吴静选修的其他课程
('S009', 'C002', NOW(), '已选'),
('S009', 'C010', NOW(), '已选'),
('S009', 'C006', NOW(), '已选'),
-- S010郑伟选修的其他课程
('S010', 'C003', NOW(), '已选'),
('S010', 'C001', NOW(), '已选'),
('S010', 'C007', NOW(), '已选');

-- 11. 添加对应的交叉成绩数据
INSERT INTO grade (student_id, teaching_task_id, regular_score, midterm_score, final_score, total_score, entry_time, entry_by, STATUS) VALUES 
-- S001张三在其他课程的成绩
('S001', 'TT011', '86.00', '89.00', '87.00', '87.50', NOW(), 'T001', '已归档'),
('S001', 'TT012', '90.00', '88.00', '92.00', '90.50', NOW(), 'T001', '公示中'),
-- S002李四在其他课程的成绩
('S002', 'TT001', '85.00', '82.00', '88.00', '85.50', NOW(), 'T001', '已归档'),
('S002', 'TT013', '88.50', '90.00', '86.00', '88.00', NOW(), 'T002', '公示中'),
-- S003王五在其他课程的成绩
('S003', 'TT020', '92.00', '94.00', '91.00', '92.50', NOW(), 'T005', '已归档'),
('S003', 'TT011', '87.50', '85.00', '89.00', '87.00', NOW(), 'T001', '公示中'),
-- S004陈明在其他课程的成绩
('S004', 'TT001', '89.00', '91.00', '88.00', '89.50', NOW(), 'T001', '已归档'),
('S004', 'TT015', '84.00', '86.00', '85.00', '85.00', NOW(), 'T003', '公示中'),
-- S005刘丽在其他课程的成绩
('S005', 'TT011', '91.50', '89.00', '93.00', '91.50', NOW(), 'T001', '已归档'),
('S005', 'TT017', '88.00', '90.00', '87.00', '88.50', NOW(), 'T004', '公示中'),
-- S006赵强在其他课程的成绩
('S006', 'TT013', '86.50', '88.00', '85.00', '86.50', NOW(), 'T002', '已归档'),
('S006', 'TT016', '90.00', '92.00', '89.00', '90.50', NOW(), 'T003', '公示中'),
-- S007孙美在其他课程的成绩
('S007', 'TT012', '93.00', '91.00', '95.00', '93.50', NOW(), 'T001', '已归档'),
('S007', 'TT017', '87.00', '89.00', '86.00', '87.50', NOW(), 'T004', '公示中'),
-- S008周华在其他课程的成绩
('S008', 'TT020', '85.50', '87.00', '84.00', '85.50', NOW(), 'T005', '已归档'),
('S008', 'TT015', '89.00', '91.00', '88.00', '89.50', NOW(), 'T003', '公示中'),
-- S009吴静在其他课程的成绩
('S009', 'TT011', '88.50', '86.00', '90.00', '88.50', NOW(), 'T001', '已归档'),
('S009', 'TT019', '92.00', '94.00', '91.00', '92.50', NOW(), 'T005', '公示中'),
-- S010郑伟在其他课程的成绩
('S010', 'TT013', '90.50', '88.00', '92.00', '90.50', NOW(), 'T002', '已归档'),
('S010', 'TT001', '86.00', '89.00', '87.00', '87.50', NOW(), 'T001', '公示中');

-- 12. 添加更多成绩统计数据（基于交叉数据）
INSERT INTO grade_statistics (object_id, TYPE, academic_year, semester, average_score, highest_score, lowest_score, pass_count, pass_rate, excellent_count, excellent_rate, statistics_time) VALUES 
('C004', '课程', '2023-2024', '春', '89.75', '95.00', '82.00', '12', '92.31', '6', '46.15', NOW()),
('C005', '课程', '2023-2024', '春', '87.40', '93.00', '80.00', '10', '83.33', '4', '33.33', NOW()),
('C006', '课程', '2023-2024', '秋', '90.60', '96.00', '84.00', '15', '93.75', '8', '50.00', NOW()),
('C007', '课程', '2023-2024', '秋', '88.90', '94.50', '82.00', '11', '91.67', '5', '41.67', NOW()),
('C008', '课程', '2023-2024', '春', '86.20', '92.00', '78.00', '9', '81.82', '3', '27.27', NOW()),
('计科2班', '班级', '2023-2024', '秋', '88.10', '94.00', '80.00', '16', '88.89', '7', '38.89', NOW()),
('软件工程2班', '班级', '2023-2024', '春', '89.80', '95.50', '82.50', '18', '94.74', '9', '47.37', NOW()),
('网络工程2班', '班级', '2023-2024', '秋', '87.30', '93.00', '79.00', '14', '87.50', '6', '37.50', NOW()),
('T004', '教师', '2023-2024', '全年', '88.75', '94.00', '81.00', '20', '90.91', '8', '36.36', NOW()),
('T005', '教师', '2023-2024', '全年', '91.20', '96.50', '84.00', '22', '95.65', '12', '52.17', NOW());

-- 查询验证数据插入情况
SELECT '学生表数据量' AS 表名, COUNT(*) AS 记录数 FROM student
UNION ALL
SELECT '教师表数据量', COUNT(*) FROM teacher
UNION ALL
SELECT '课程表数据量', COUNT(*) FROM course
UNION ALL
SELECT '管理员表数据量', COUNT(*) FROM admin
UNION ALL
SELECT '教学任务表数据量', COUNT(*) FROM teaching_task
UNION ALL
SELECT '成绩表数据量', COUNT(*) FROM grade
UNION ALL
SELECT '选课记录表数据量', COUNT(*) FROM enrollment
UNION ALL
SELECT '成绩统计表数据量', COUNT(*) FROM grade_statistics;

-- 查询交叉数据验证
SELECT '=== 教师教授课程统计 ===' AS 统计类型, '' AS 详情, '' AS 数量
UNION ALL
SELECT '教师姓名', '教授课程数', '教学任务数' 
UNION ALL
SELECT t.name, 
       CAST(COUNT(DISTINCT tt.course_id) AS CHAR) AS 课程数,
       CAST(COUNT(tt.id) AS CHAR) AS 任务数
FROM teacher t 
LEFT JOIN teaching_task tt ON t.id = tt.teacher_id 
GROUP BY t.id, t.name
UNION ALL
SELECT '', '', ''
UNION ALL
SELECT '=== 学生选课统计 ===', '', ''
UNION ALL
SELECT '学生姓名', '选课数量', '有成绩课程数'
UNION ALL
SELECT s.name,
       CAST(COUNT(DISTINCT e.course_id) AS CHAR) AS 选课数,
       CAST(COUNT(DISTINCT g.teaching_task_id) AS CHAR) AS 成绩数
FROM student s
LEFT JOIN enrollment e ON s.id = e.student_id
LEFT JOIN grade g ON s.id = g.student_id
GROUP BY s.id, s.name;grade_statistics